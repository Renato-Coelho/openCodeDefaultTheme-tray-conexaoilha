{% if products|length > 0 %}

 	<div class="products_row">
  		{% for product in products %}
      		{% element 'snippets/product' {"product": product} %}
    	<!-- {{ loop.index }} -->
      		{% if loop.index is divisible by(3) and products[loop.index] %}
    </div>
    <div class="products_row">
      		{% endif %}
  		{% endfor %}
	</div>

{% endif %}